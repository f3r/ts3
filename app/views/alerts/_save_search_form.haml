- extra_fields = nil
= form_for @alert, :html => {:class => "form-horizontal"} do |f|  
  .modal-header
    %h3=t(@current_action == "edit" ? "alerts.edit_alert" : "alerts.create_alert")
  .modal-body
    %fieldset
      .column1
        .control-group
        %label{:class => "control-label"}= t("alerts.settings")
        .controls
          = select "alert", 'schedule', options_for_select([[t("alerts.daily"), "daily"], [t("alerts.weekly"), "weekly"], [t("alerts.monthly"), "monthly"]], @alert.schedule)
          = select 'alert', 'delivery_method', options_for_select([[t("alerts.email"), "email"]], @alert.delivery_method)
        = f.fields_for :search do |search_form|
          = search_form.hidden_field :currency_id
          .control-group
          %label{:class => "control-label"}= t("places.search.city")
          .controls
            = search_form.select(:city_id, options_for_select(cities_options, @alert.search.city_id))
          = render_overridable_partial('save_search_fields', :search_form => search_form)
          .control-group
          %label{:class => "control-label"}= t("places.search.sort_by")
          .controls
            = search_form.select :sort_by, options_for_select(@alert.search.sort_options, @alert.search.sort_by || 'price_highest'), :class => 'medium'
          .control-group
          %label{:class => "control-label"}= t("places.search.minimum_price")
          .controls
            .input-prepend
              %span.add-on= current_currency.label
              = search_form.text_field :min_price, :placeholder => t("places.search.minimum_price"), :class => 'span2', 'autocomplete' => 'off'
          .control-group
          %label{:class => "control-label"}= t("places.search.maximum_price")
          .controls
            .input-prepend
              %span.add-on= current_currency.label
              = search_form.text_field :max_price, :placeholder => t("places.search.maximum_price"), :class => 'span2', 'autocomplete' => 'off'
              -# I am unable to get the search form out of the scope
              - extra_fields = render_overridable_partial('save_search_fields_extra', :search_form => search_form)
      .column2
        = extra_fields
        
  .modal-footer
    %button.btn{:onclick => "$('.modal').modal('hide'); return false;"}=t("cancel")
    %button.btn.btn-primary=t("submit")
