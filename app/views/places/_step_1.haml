.panel-wrapper
  %h2.title List your Place
  %fieldset
    .clearfix
      .input
        = f.label :city_id, 'What city is your place in?'
        = f.select :city_id, [['Singapore', '1'], ['Hong Kong', '13984'], ['Kuala Lumpur', '4065']], :class => "validate[required] span6"
      .input
        = f.label :title, 'Give us a descriptive title'
        = f.text_field :title, :class => "validate[required] span7"

      .input
        = f.label :place_type_id, 'What kind of place is it'
        = f.select :place_type_id, [["Apartment", 1], ["House", 2], ["Villa", 3], ["Room", 4], ["Shared Room", 5], ["Dorm", 6], ["Other space", 7]]
      .input
        = f.label :num_bedrooms, 'How many bedrooms'
        = f.text_field :num_bedrooms, :class => "validate[required,custom[integer]] span2"
      .input
        = f.label :max_guests, 'Max number of Guests'
        = f.text_field :max_guests, :class => "validate[required,custom[integer]] span2"
      %br.clearfix
      %br.clearfix
      .input
        %label.reset-width
          = f.check_box :terms
          I agree to the
          = link_to 'terms and conditions', '/terms-and-conditions', :target => :blank        

.arrows.clearfix
  .coda-nav-right
    %button.btn.primary{:type => "submit", :id => "submit_button"}
      Save and Continue &raquo;

:javascript

  $(function() {

    function validateStep1Form() {

      if($('#place_title').val() && $('#place_num_bedrooms').val() && $('#place_max_guests').val() && $('#place_terms').attr("checked") == "checked") {
        $('#submit_button').attr('disabled', null);
      } else {
        $('#submit_button').attr('disabled', 'true');
      }

    }

    $('form input').change(function(){
      validateStep1Form();
    }).keypress(function() {
      validateStep1Form();
    });
      
    validateStep1Form();

  });
