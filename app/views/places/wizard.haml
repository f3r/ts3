- content_for :javascripts do
  %script{:src => "/javascripts/wizard.js", :type => 'text/javascript'}

  %link{:rel => "stylesheet", :href => "/javascripts/uploadify/uploadify.css"}  
  %script{:src => "/javascripts/uploadify/swfobject.js", :type => "text/javascript"}
  %script{:src => "/javascripts/uploadify/jquery.uploadify.v2.1.4.min.js", :type => "text/javascript"}

  %script{:src => "/javascripts/jquery.inlineedit.js", :type => "text/javascript"}

.row
  .span12
    .float-right
      = link_to t(:invisible), '#', :class => 'btn secondary', :id => 'listing-status'
    %h1.title= @place.title
    %p.section_title= t(:general_information)
    .wizard-wrapper
      = form_for :place, :class => 'form-stacked', :html => {:id => "wizard_form"} do |f|
        = hidden_field_tag :place_id, params[:id]
        = hidden_field_tag :place_current, @place_basic_info.to_json
        = hidden_field_tag :token, form_authenticity_token, :id => 'token'
        = f.hidden_field :published
        / .description
        .panel#1
          = render 'step_general', :f => f
        / .photos
        .panel#2
          = render 'step_photos', :f => f
        / .amenities
        .panel#3
          = render 'step_amenities', :f => f
        / .pricing        
        .panel#4
          = render 'step_pricing', :f => f
        / .celendar
        .panel#5
          = render 'step_calendar', :f => f
        / .preview
        .panel#6
          -#= render 'preview', :f => f
  .span4
    = render :partial => 'sidebar'

:javascript

  $(function() {

    var wizardStep = "#{params[:step]}";
    // Load initial Panel
    $('.wizard-wrapper .panel').css("display", "none");  
    $('.wizard-wrapper .panel:first').css("display", "block");  

    if(wizardStep != "") {
      switchToPanel("#" + wizardStep);
    } else {
      switchToPanel('#1');
    }

    validatePanels(); 

  });
