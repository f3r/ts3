.span6
  .section-header
    =t("users.section_header_user_profile")
    - unless request.fullpath.include?('edit')
      = link_to t("users.edit"), edit_profile_path, :class => "settings"
    
  %table.borderless.user_info
    %tr
      %td.label_detail
        #{t("users.first_name")}
      %td.user_detail
        = @user['first_name']
    %tr
      %td.label_detail
        #{t("users.last_name")}
      %td.user_detail
        = @user['last_name']
    %tr
      %td.label_detail
        #{t("users.email")}
      %td.user_detail
        = @user['email']
    - if !@user['address'].nil?
      %tr
        %td.label_detail
          #{t("users.billing_address")}
        %td.user_detail
          = "#{@user['address']['street']}"
          %br
          = "#{@user['address']['zip']} #{@user['address']['city']}"
          %br
          = "#{@user['address']['country']}"
    - if !@user['mobile_phone'].nil?
      %tr
        %td.label_detail
          #{t("users.mobile_phone")}
        %td.user_detail
          = @user['phone_mobile']
    - if !@user['gender'].nil?
      %tr
        %td.label_detail
          #{t("users.gender")}
        %td.user_detail
          = @user['gender'].nil? ? t("users.gender_undisclosed") : t("users.gender_#{@user['gender']}")
    - if !@user['birthdate'].nil?
      %tr
        %td.label_detail
          #{t("users.birthdate")}
        %td.user_detail
          = date_convert @user['birthdate'] unless @user['birthdate'].blank?

- content_for :aside do
  - if @user['phone_mobile'].blank? or @user['address'].blank?
    - required_fields = ""
    - required_fields = required_fields + "* #{t("users.mobile_phone")}<br />" if @user['phone_mobile'].blank?
    - required_fields = required_fields + "* #{t("users.billing_address")}<br />" if @user['address'].blank?
    %br
    = link_to image_tag("i_profile.png", :width => 38, :height => 38), "#", :rel => "popover", "data-original-title" => t("users.required_fields"), "data-content" => required_fields
    %p
      %i= t("users.profile_required_message")